<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 320">
  <defs>
    <linearGradient id="histGrad" x1="0%" y1="100%" x2="0%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#60a5fa"/>
    </linearGradient>
  </defs>
  
  <rect width="800" height="320" fill="#0f172a"/>
  <text x="400" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#f8fafc">Histogram Processing</text>
  
  <!-- Original Image + Histogram -->
  <g transform="translate(50, 60)">
    <rect width="160" height="110" rx="6" fill="#1e293b" stroke="#334155" stroke-width="2"/>
    <text x="80" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#f8fafc">Low Contrast</text>
    
    <!-- Dark image representation -->
    <rect x="10" y="30" width="60" height="50" rx="3" fill="#334155"/>
    
    <!-- Narrow histogram -->
    <g transform="translate(80, 30)">
      <rect width="70" height="50" fill="#0f172a" rx="2"/>
      <rect x="25" y="40" width="8" height="10" fill="url(#histGrad)"/>
      <rect x="33" y="30" width="8" height="20" fill="url(#histGrad)"/>
      <rect x="41" y="20" width="8" height="30" fill="url(#histGrad)"/>
      <rect x="49" y="35" width="8" height="15" fill="url(#histGrad)"/>
    </g>
    
    <text x="80" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748b">Narrow histogram</text>
  </g>
  
  <!-- Arrow -->
  <g transform="translate(220, 110)">
    <rect width="80" height="30" rx="4" fill="#22c55e"/>
    <text x="40" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Equalize</text>
  </g>
  
  <!-- Equalized Image + Histogram -->
  <g transform="translate(320, 60)">
    <rect width="160" height="110" rx="6" fill="#1e293b" stroke="#22c55e" stroke-width="2"/>
    <text x="80" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#34d399">High Contrast</text>
    
    <!-- Enhanced image -->
    <rect x="10" y="30" width="60" height="50" rx="3" fill="#475569"/>
    
    <!-- Spread histogram -->
    <g transform="translate(80, 30)">
      <rect width="70" height="50" fill="#0f172a" rx="2"/>
      <rect x="5" y="35" width="6" height="15" fill="url(#histGrad)"/>
      <rect x="13" y="30" width="6" height="20" fill="url(#histGrad)"/>
      <rect x="21" y="25" width="6" height="25" fill="url(#histGrad)"/>
      <rect x="29" y="20" width="6" height="30" fill="url(#histGrad)"/>
      <rect x="37" y="25" width="6" height="25" fill="url(#histGrad)"/>
      <rect x="45" y="30" width="6" height="20" fill="url(#histGrad)"/>
      <rect x="53" y="35" width="6" height="15" fill="url(#histGrad)"/>
      <rect x="61" y="40" width="6" height="10" fill="url(#histGrad)"/>
    </g>
    
    <text x="80" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#34d399">Uniform histogram</text>
  </g>
  
  <!-- CLAHE -->
  <g transform="translate(510, 60)">
    <rect width="260" height="110" rx="8" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
    <text x="130" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">CLAHE</text>
    <text x="130" y="42" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fef3c7">Contrast Limited Adaptive Histogram Eq.</text>
    
    <!-- Grid representation -->
    <g transform="translate(30, 55)">
      <rect width="40" height="40" fill="#334155" stroke="#f59e0b" stroke-width="1"/>
      <rect x="40" width="40" height="40" fill="#3f4f5f" stroke="#f59e0b" stroke-width="1"/>
      <rect y="40" width="40" height="40" fill="#4f5f6f" stroke="#f59e0b" stroke-width="1"/>
      <rect x="40" y="40" width="40" height="40" fill="#5f6f7f" stroke="#f59e0b" stroke-width="1"/>
      <text x="40" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#94a3b8">Local tiles</text>
    </g>
    
    <g transform="translate(140, 55)">
      <text x="50" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">• Local equalization</text>
      <text x="50" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">• Clip limit prevents</text>
      <text x="50" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">  noise amplification</text>
    </g>
  </g>
  
  <!-- Formulas -->
  <g transform="translate(50, 195)">
    <rect width="700" height="105" rx="10" fill="#1e293b" stroke="#334155" stroke-width="2"/>
    <text x="350" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f8fafc">Histogram Equalization Formula</text>
    
    <text x="350" y="55" text-anchor="middle" font-family="Georgia, serif" font-size="13" fill="#fbbf24">s = T(r) = (L-1) × Σ p(rⱼ) for j=0 to k</text>
    
    <text x="180" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">r: input intensity</text>
    <text x="350" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">s: output intensity</text>
    <text x="520" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#64748b">p(r): probability</text>
  </g>
</svg>