<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 380">
  <defs>
    <linearGradient id="qGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444"/>
      <stop offset="100%" style="stop-color:#dc2626"/>
    </linearGradient>
    <linearGradient id="kGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#22c55e"/>
      <stop offset="100%" style="stop-color:#16a34a"/>
    </linearGradient>
    <linearGradient id="vGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#1d4ed8"/>
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>
  
  <rect width="800" height="380" fill="#0f172a"/>
  <text x="400" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#f8fafc">Self-Attention Mechanism</text>
  
  <!-- Input -->
  <g transform="translate(50, 70)">
    <rect width="80" height="120" rx="6" fill="#1e293b" stroke="#334155" stroke-width="2"/>
    <text x="40" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#f8fafc">Input X</text>
    <text x="40" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">n × d</text>
    <rect x="10" y="60" width="60" height="50" rx="3" fill="#475569"/>
  </g>
  
  <!-- Projections -->
  <g transform="translate(160, 50)">
    <line x1="0" y1="80" x2="40" y2="40" stroke="#ef4444" stroke-width="2"/>
    <line x1="0" y1="80" x2="40" y2="80" stroke="#22c55e" stroke-width="2"/>
    <line x1="0" y1="80" x2="40" y2="120" stroke="#3b82f6" stroke-width="2"/>
    
    <!-- Q -->
    <g transform="translate(45, 15)">
      <rect width="60" height="45" rx="4" fill="url(#qGrad)" filter="url(#glow)"/>
      <text x="30" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">Q</text>
      <text x="30" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fecaca">Query</text>
    </g>
    
    <!-- K -->
    <g transform="translate(45, 65)">
      <rect width="60" height="45" rx="4" fill="url(#kGrad)" filter="url(#glow)"/>
      <text x="30" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">K</text>
      <text x="30" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#d1fae5">Key</text>
    </g>
    
    <!-- V -->
    <g transform="translate(45, 115)">
      <rect width="60" height="45" rx="4" fill="url(#vGrad)" filter="url(#glow)"/>
      <text x="30" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff">V</text>
      <text x="30" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#dbeafe">Value</text>
    </g>
  </g>
  
  <!-- QK^T / sqrt(d) -->
  <g transform="translate(290, 55)">
    <rect width="100" height="60" rx="6" fill="#1e293b" stroke="#fbbf24" stroke-width="2"/>
    <text x="50" y="25" text-anchor="middle" font-family="Georgia, serif" font-size="12" fill="#fbbf24">QKᵀ</text>
    <text x="50" y="45" text-anchor="middle" font-family="Georgia, serif" font-size="11" fill="#fbbf24">/ √dₖ</text>
  </g>
  
  <!-- Lines to QKT -->
  <line x1="265" y1="75" x2="290" y2="85" stroke="#ef4444" stroke-width="2"/>
  <line x1="265" y1="110" x2="290" y2="85" stroke="#22c55e" stroke-width="2"/>
  
  <!-- Attention weights -->
  <g transform="translate(410, 55)">
    <rect width="80" height="60" rx="6" fill="#7c3aed"/>
    <text x="40" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#fff">Softmax</text>
    <text x="40" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ddd6fe">Attention</text>
  </g>
  
  <!-- Arrow -->
  <line x1="390" y1="85" x2="410" y2="85" stroke="#fbbf24" stroke-width="2"/>
  
  <!-- Multiply with V -->
  <g transform="translate(510, 80)">
    <circle cx="20" cy="20" r="18" fill="#f59e0b"/>
    <text x="20" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="#fff">×</text>
  </g>
  
  <!-- Lines to multiply -->
  <line x1="490" y1="85" x2="492" y2="100" stroke="#a78bfa" stroke-width="2"/>
  <line x1="265" y1="150" x2="492" y2="100" stroke="#3b82f6" stroke-width="2"/>
  
  <!-- Output -->
  <g transform="translate(570, 65)">
    <rect width="80" height="70" rx="6" fill="#22c55e"/>
    <text x="40" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff">Output</text>
    <text x="40" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#d1fae5">n × d</text>
  </g>
  
  <line x1="548" y1="100" x2="570" y2="100" stroke="#f59e0b" stroke-width="2"/>
  
  <!-- Multi-Head Attention -->
  <g transform="translate(50, 200)">
    <rect width="700" height="160" rx="10" fill="#1e293b" stroke="#334155" stroke-width="2"/>
    <text x="350" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#f8fafc">Multi-Head Attention</text>
    
    <!-- Multiple heads -->
    <g transform="translate(50, 45)">
      <rect width="80" height="80" rx="6" fill="#ef4444" opacity="0.7"/>
      <text x="40" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Head 1</text>
      <text x="40" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fecaca">d/h dims</text>
    </g>
    <g transform="translate(150, 45)">
      <rect width="80" height="80" rx="6" fill="#22c55e" opacity="0.7"/>
      <text x="40" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Head 2</text>
      <text x="40" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#d1fae5">d/h dims</text>
    </g>
    <g transform="translate(250, 45)">
      <rect width="80" height="80" rx="6" fill="#3b82f6" opacity="0.7"/>
      <text x="40" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Head 3</text>
      <text x="40" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#dbeafe">d/h dims</text>
    </g>
    
    <text x="370" y="90" font-family="Arial, sans-serif" font-size="20" fill="#64748b">...</text>
    
    <g transform="translate(410, 45)">
      <rect width="80" height="80" rx="6" fill="#f59e0b" opacity="0.7"/>
      <text x="40" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Head h</text>
      <text x="40" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fef3c7">d/h dims</text>
    </g>
    
    <!-- Concat -->
    <g transform="translate(520, 60)">
      <rect width="60" height="50" rx="4" fill="#7c3aed"/>
      <text x="30" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Concat</text>
    </g>
    
    <!-- Linear -->
    <g transform="translate(600, 60)">
      <rect width="60" height="50" rx="4" fill="#ec4899"/>
      <text x="30" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#fff">Linear</text>
      <text x="30" y="38" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#fce7f3">Wᴼ</text>
    </g>
    
    <text x="350" y="150" text-anchor="middle" font-family="Georgia, serif" font-size="11" fill="#fbbf24">MultiHead = Concat(head₁,...,headₕ)Wᴼ</text>
  </g>
</svg>